{"mappings":"sgBAAAA,EAAA,S,WAKA,MAAMC,EAAYC,SAASC,cAAc,qBAGnCC,GAFkBF,SAASC,cAAc,SAC3BD,SAASC,cAAc,kBACxBD,SAASC,cAAc,uBACpCE,EAAQH,SAASC,cAAc,gBAErC,SAASG,IACLD,EAAME,UAAUC,OAAO,YAC3B,CAsDAP,EAAUQ,iBAAiB,QAASH,GACpCF,EAAWK,iBAAiB,QAASH,GAGrBJ,SAASC,cAAc,mBAClBD,SAASQ,eAAe,mBACzBR,SAASQ,eAAe,kBACvBR,SAASQ,eAAe,mBACrBR,SAASQ,eAAe,sBAChCR,SAASQ,eAAe,cACvBR,SAASC,cAAc,kBACrBD,SAASC,cAAc,wBAC3BD,SAASC,cAAc,SARtC,MAWMQ,EAAUT,SAASC,cAAc,6BAKnBS,iBACKC,MACrB,4FAAkDF,EAAQG,gCAE5CC,OAGlBC,GACGC,MAAKC,IACJ,MAAMC,EAAYD,EAAOE,QACzBC,QAAQC,IAAIH,GACZA,EAAUI,KAAIJ,GAAaK,IAC3B,MAAMA,EAAQ,CACZC,MAAOD,EAAMC,MACbC,aAAcF,EAAME,aACpBC,WAAYH,EAAMG,WAClBC,WAAYJ,EAAMI,WAClBC,cAAeL,EAAMM,eAErBC,SAAUP,EAAMO,SAgClB,G,iKC1IG,MAAMC,EAAkBd,GACtBA,EAAOE,QACXG,KAAIC,GACI,2GACLA,EAAMS,8BACWT,EAAMC,gIAGUD,EAAMC,uDACND,EAAMU,sDACJV,EAAMW,2EAETC,KAAKC,MAA2B,GAArBb,EAAME,cAAqB,mCAIzEY,KAAK,G,uCChBH,WACH,MAAMC,EAAqBrC,SAASQ,eAAe,gBAC7C8B,EAAmBtC,SAASQ,eAAe,cAEjD,IAAI+B,EAAkB,iBAClBC,EAAiB,gBAqCrBH,EAAmB9B,iBAAiB,SAhCpC,WAEI,MACMkC,EADUzC,SAASC,cAAc,mBACZyC,UAErBC,EAAkBC,KAAKC,MAAMC,aAAaC,QAAQR,IAAoB,MAEvEI,EAAgBK,SAASP,GAK1BtB,QAAQC,IAAIqB,EAAa,oBAJzBE,EAAgBM,KAAKR,GAErBK,aAAaI,QAAQX,EAAiBK,KAAKO,UAAUR,IAI7D,IAmBAL,EAAiB/B,iBAAiB,SAjBlC,WAEI,MACMkC,EADUzC,SAASC,cAAc,mBACZyC,UAErBC,EAAkBC,KAAKC,MAAMC,aAAaC,QAAQP,IAAmB,MAEtEG,EAAgBK,SAASP,GAK1BtB,QAAQC,IAAIqB,EAAa,oBAJzBE,EAAgBM,KAAKR,GAErBK,aAAaI,QAAQV,EAAgBI,KAAKO,UAAUR,IAI5D,GAIJ,CAEAS,E","sources":["src/js/modal.js","src/js/create-movie-card.js","src/js/add-to-local-storage.js"],"sourcesContent":["import { createMovieCard } from './create-movie-card';\nimport { localStorageHandler } from \"./add-to-local-storage\";\n// import { renderModalMarkup } from './render-modal-markup';\n\n// Open or close modal\nconst openModal = document.querySelector(\"[data-modal-open]\");\nconst openModalOnCard = document.querySelector(\".card\");\nconst modalWindow = document.querySelector(\".modal__window\");\nconst closeModal = document.querySelector(\"[data-modal-close]\");\nconst modal = document.querySelector(\"[data-modal]\");\n\nfunction toggleModal() {\n    modal.classList.toggle(\"is-hidden\");\n};\n\n// function showModal(data) {\n//   const markup = renderModalMarkup(data);\n//   modal.insertAdjacentHTML(\"beforeend\", markup);\n// };\n\n// function modalHandler() {\n\n//   function renderModal() {\n//     openModalOnCard.forEach(function(event) {\n//       event.addEventListener(\"click\", () => {\n//         modal.classList.remove(\"is-hidden\")\n\n//       })\n//       document.addEventListener(\"keydown\", closeOnESC);\n//       document.addEventListener(\"click\", closeOnBackdrop);\n//       document.addEventListener(\"click\", closeOnButton);\n//     })\n//     // modal.classList.remove(\"is-hidden\");\n//     // document.addEventListener(\"keydown\", closeOnESC);\n//     // document.addEventListener(\"click\", closeOnBackdrop);\n//     // document.addEventListener(\"click\", closeOnButton);\n//   }\n\n//   function closeModal() {\n//     modal.classList.add(\"is-hidden\");\n//     document.removeEventListener(\"keyup\", closeOnESC);\n//     document.removeEventListener(\"click\", closeOnBackdrop);\n//     document.removeEventListener(\"click\", closeOnButton);\n//   }\n\n\n//   function closeOnESC(event) {\n//     if (event.key === \"Escape\") {\n//       closeModal();\n//     }\n//   }\n\n//   function closeOnBackdrop(event) {\n//     if (event.target !== modal) {\n//       closeModal();\n//     }\n//   }\n\n//   function closeOnButton(event) {\n//     if (event.target === closeModal) {\n//       closeModal();\n//     }\n//   }\n// };\n\n// modalHandler();\n\nopenModal.addEventListener(\"click\", toggleModal);\ncloseModal.addEventListener(\"click\", toggleModal);\n\n// Fetch movie info\nconst titleEl = document.querySelector(\"h2.modal__title\");\nconst voteRatingEl = document.getElementById(\"queryVoteRating\");\nconst voteCountEl = document.getElementById(\"queryVoteCount\");\nconst popularityEl = document.getElementById(\"queryPopularity\");\nconst originalTitleEl = document.getElementById(\"queryOriginalTitle\");\nconst genreEl = document.getElementById(\"queryGenre\");\nconst posterEl = document.querySelector(\".modal__poster\");\nconst overviewEl = document.querySelector(\".modal__summary-text\");\nconst cardEl = document.querySelector(\".card\");\n\n// Fetch trending\nconst inputEl = document.querySelector(\".header-search-bar__input\");\n\nconst searchMovieAPI_URL = \"https://api.themoviedb.org/3/search/movie\";\nconst API_key = \"dbea77d3eb5b3622b027f73f6a5032fe\";\n\nconst fetchMovies = async () => {\n  const response = await fetch(\n    `${searchMovieAPI_URL}?api_key=${API_key}&query=${inputEl.value}&page=1&language=en-US`,\n  );\n  return response.json();\n};\n\nfetchMovies()\n  .then(movies => {\n    const movieData = movies.results\n    console.log(movieData);\n    movieData.map(movieData => movie)\n    const movie = {\n      title: movie.title,\n      vote_average: movie.vote_average,\n      vote_count: movie.vote_count,\n      popularity: movie.popularity,\n      originalTitle: movie.original_title,\n      // genre: movies.genre_ids,\n      overview: movie.overview\n    }\n\n    const modalShow = movie => {\n      cardEl.addEventListener(\"click\", () => {\n        cardEl.forEach(movie => {\n        let modal = document.querySelector(\".modal\");\n      const closeModal = document.querySelector(\"[data-modal-close]\");\n      // const posterEl = document.querySelector(\".modal__poster\");\n      const titleEl = document.querySelector(\"h2.modal__title\");\n      const voteRatingEl = document.getElementById(\"queryVoteRating\");\n      const voteCountEl = document.getElementById(\"queryVoteCount\");\n      const popularityEl = document.getElementById(\"queryPopularity\");\n      const originalTitleEl = document.getElementById(\"queryOriginalTitle\");\n      // const genreEl = getElementById(\"queryGenre\");\n      const overviewEl = document.querySelector(\".modal__summary-text\");;\n\n      modal.classList.remove(\"is-hidden\");\n      // posterEl.src = `${IMG_URL}${movie.poster_path}`;\n      titleEl.innerHTML = `${movie.original_title}`;\n      voteRatingEl.innerHTML = `${movie.vote_average}`;\n      voteCountEl.innerHTML = `${movie.vote_count}`;\n      popularityEl.innerHTML = `${movie.popularity}`;\n      originalTitleEl.innerHTML = `${movie.original_title}`;\n      // genreEl.innerHTML = `${movie.genres}`;\n      overviewEl.innerHTML = `${movie.overview}`;\n\n      closeModal.addEventListener(\"click\", () => {\n        modal.classList.add(\"is-hidden\");\n      });\n      })\n      })\n    }\n  }\n)\n","export const createMovieCard = movies => {\n  return movies.results\n    .map(movie => {\n      return `<div id=\"card\" class=\"card\"><img class=\"card__poster\" src='https://image.tmdb.org/t/p/w220_and_h330_face${\n        movie.poster_path\n      }' alt=Poster of ${movie.title} movie></a>\n    <div class=\"card__info\">\n      <div class=\"card__quick-info\">\n        <div class=\"card__movie-title\">${movie.title}</div>\n        <div class=\"card__movie-genre\">${movie.id}</div>\n        <div class=\"card__movie-release\">${movie.release_date}</div>\n      </div>\n      <div class=\"card__movie-rating\">${Math.round(movie.vote_average * 10) / 10}</div>\n    </div>\n  </div>`;\n    })\n    .join('');\n};\n","export function localStorageHandler() {\n    const addToWatchedButton = document.getElementById(\"addToWatched\");\n    const addToQueueButton = document.getElementById(\"addToQueue\");\n    \n    let STORAGE_WATCHED = \"watched-movies\";\n    let STORAGE_QUEUED = \"queued-movies\";\n    \n    let moviesWatched = [];\n    let moviesQueued = [];\n\n    function addToWatched() {\n        \n        const titleEl = document.querySelector(\"h2.modal__title\");\n        const movieTitle = titleEl.innerHTML\n\n        const existingEntries = JSON.parse(localStorage.getItem(STORAGE_WATCHED) || '[]');\n        \n        if (!existingEntries.includes(movieTitle)) {\n            existingEntries.push(movieTitle);\n            \n            localStorage.setItem(STORAGE_WATCHED, JSON.stringify(existingEntries));\n        } else {\n            console.log(movieTitle + ' already exists')\n        }\n    }\n\n    function addToQueued() {\n        \n        const titleEl = document.querySelector(\"h2.modal__title\");\n        const movieTitle = titleEl.innerHTML\n\n        const existingEntries = JSON.parse(localStorage.getItem(STORAGE_QUEUED) || '[]');\n        \n        if (!existingEntries.includes(movieTitle)) {\n            existingEntries.push(movieTitle);\n            \n            localStorage.setItem(STORAGE_QUEUED, JSON.stringify(existingEntries));\n        } else {\n            console.log(movieTitle + ' already exists')\n        }\n    }\n    \n    addToWatchedButton.addEventListener(\"click\", addToWatched);\n    addToQueueButton.addEventListener(\"click\", addToQueued);\n}\n\nlocalStorageHandler();"],"names":["parcelRequire","$2ea800676e6f7669$var$openModal","document","querySelector","$2ea800676e6f7669$var$closeModal","$2ea800676e6f7669$var$modal","$2ea800676e6f7669$var$toggleModal","classList","toggle","addEventListener","getElementById","$2ea800676e6f7669$var$inputEl","async","fetch","value","json","$2ea800676e6f7669$var$fetchMovies","then","movies","movieData","results","console","log","map","movie","title","vote_average","vote_count","popularity","originalTitle","original_title","overview","$ee4a85620965e803$export$9d27b867a89df126","poster_path","id","release_date","Math","round","join","addToWatchedButton","addToQueueButton","STORAGE_WATCHED","STORAGE_QUEUED","movieTitle","innerHTML","existingEntries","JSON","parse","localStorage","getItem","includes","push","setItem","stringify","$26f056e80eb8acc3$export$b0c42ac82fb8127"],"version":3,"file":"index.e215c9d6.js.map"}