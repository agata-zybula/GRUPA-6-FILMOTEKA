{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BAIA,MAAMC,EAAUC,SAASC,cAAc,6BACjCC,EAAiBF,SAASC,cAAc,8BACxCE,EAAYH,SAASC,cAAc,+BACnCG,EAAYJ,SAASC,cAAc,kBACnCI,EAAwBL,SAASC,cAAc,cACpBD,SAASC,cAAc,uBAGxD,IAAIK,EAAO,EAEXH,EAAUI,MAAMC,WAAa,SAE7B,MAAMC,EAAkBC,WACtB,EAAAC,EAAAC,WACA,IACE,MAAMC,EAAqB,4CAMrBC,SALeC,EAAAC,QAAMC,IACzB,GAAGJ,oDAA+Cd,EAAQmB,cAAcZ,qBAIpDa,KAAKC,QAI3B,aAFM,EAAAvB,EAAAwB,cACN,EAAAV,EAAAW,iBACOR,CAKT,CAJE,MAAOS,GACPC,QAAQD,MAAMA,EAChB,UACE,EAAAZ,EAAAC,UACF,GAGIa,EAAwBX,IAC5BU,QAAQE,IAAI,SAAUZ,GACfA,EACJa,KAAIC,IACH,MAAMC,EAAaD,EAAME,UACtBC,MAAM,EAAG,GACTJ,KAAIK,GAAWnC,EAAAoC,UAAUD,KACzBE,KAAK,MACR,MAAO,+FACXN,EAAMO,+BAA+BP,EAAMQ,yBAAyBR,EAAMS,wHAGnCT,EAAMQ,uDACNP,qDACED,EAAMU,aAAaP,MAAM,EAAG,iEAE/BQ,KAAKC,MAA2B,GAArBZ,EAAMa,cAAqB,gCAErE,IAEJP,KAAK,KAUVhC,EAAewC,iBAAiB,SAASC,IACvCA,EAAMC,iBACNtC,EAAO,EAC2BN,SAASC,cAAc,uBAAuB4C,QAAS,EAC1D7C,SAASC,cAAc,cAAc4C,QAAS,EAC7EpC,IAAkBqC,MAAKhC,IAIC,IAAlBA,EAAOiC,QACT3C,EAAU4C,UAAY,GACtBjD,EAAQmB,MAAQ,GAChBf,EAAUI,MAAMC,WAAa,YAE7BL,EAAUI,MAAMC,WAAa,SAC7BJ,EAAU4C,UAAYvB,EAAsBX,GAC9C,GACF,IAGFf,EAAQ2C,iBAAiB,YAAYC,IACjB,UAAdA,EAAMM,MACRN,EAAMC,iBACN1C,EAAegD,QACjB,IAGF7C,EAAsBqC,iBAAiB,SAASC,IAC9CrC,GAAQ,EAlCRG,IAAkBqC,MAAKhC,IACrBR,GAAQ,EACRF,EAAU+C,mBAAmB,YAAa1B,EAAsBX,GAAA,GAiClE","sources":["src/js/header-home.js"],"sourcesContent":["import { genreList, getGenres } from './fetch-genres';\nimport axios from 'axios';\nimport { spinner, removeSpinner } from './spinner';\n\nconst inputEl = document.querySelector('.header-search-bar__input');\nconst searchButtonEl = document.querySelector('.header-search-bar__button');\nconst warningEl = document.querySelector('.header-search-bar__warning');\nconst galleryEl = document.querySelector('.cards-wrapper');\nconst loadMoreInputButtonEl = document.querySelector('.load-more');\nconst loadMoreTrendingButtonEl = document.querySelector('.load-more-trending');\n\nconst API_key = 'dbea77d3eb5b3622b027f73f6a5032fe';\nlet page = 1;\n\nwarningEl.style.visibility = 'hidden';\n\nconst getMoviesSearch = async () => {\n  spinner();\n  try {\n    const searchMovieAPI_URL = 'https://api.themoviedb.org/3/search/movie';\n    const result = await axios.get(\n      `${searchMovieAPI_URL}?api_key=${API_key}&query=${inputEl.value}&page=${page}&language=en-US`,\n    );\n\n    // console.log('response getMovies', result);\n    const movies = result.data.results;\n    // console.log('movies', movies);\n    await getGenres();\n    removeSpinner();\n    return movies;\n  } catch (error) {\n    console.error(error);\n  } finally {\n    spinner();\n  }\n};\n\nconst createMovieCardSearch = movies => {\n  console.log('movies', movies);\n  return movies\n    .map(movie => {\n      const genreNames = movie.genre_ids\n        .slice(0, 3)\n        .map(genreId => genreList[genreId])\n        .join(', ');\n      return `<div id=\"card\" class=\"card\"><img class=\"card__poster\" src='https://image.tmdb.org/t/p/w500\n${movie.poster_path}' alt='Poster of ${movie.title} movie' data-id=\"${movie.id}\"></a>\n    <div class=\"card__info\">\n      <div class=\"card__quick-info\">\n        <div class=\"card__movie-title\">${movie.title}</div>\n        <div class=\"card__movie-genre\">${genreNames}</div>\n        <div class=\"card__movie-release\">${movie.release_date.slice(0, 4)}</div>\n      </div>\n      <div class=\"card__movie-rating\">${Math.round(movie.vote_average * 10) / 10}</div>\n    </div>\n  </div>`;\n    })\n    .join('');\n};\n\nconst loadMorePhotosInput = () => {\n  getMoviesSearch().then(movies => {\n    page += 1;\n    galleryEl.insertAdjacentHTML('beforeend', createMovieCardSearch(movies));\n  });\n};\n\nsearchButtonEl.addEventListener('click', event => {\n  event.preventDefault();\n  page = 1;\n  const loadMoreTrendingButtonEl = (document.querySelector('.load-more-trending').hidden = true);\n  const loadMoreInputButtonEl = (document.querySelector('.load-more').hidden = false);\n  getMoviesSearch().then(movies => {\n    // const movieData = movies;\n    // console.log('movieData', movieData);\n\n    if (movies.length === 0) {\n      galleryEl.innerHTML = '';\n      inputEl.value = '';\n      warningEl.style.visibility = 'visible';\n    } else {\n      warningEl.style.visibility = 'hidden';\n      galleryEl.innerHTML = createMovieCardSearch(movies);\n    }\n  });\n});\n\ninputEl.addEventListener('keypress', event => {\n  if (event.key === 'Enter') {\n    event.preventDefault();\n    searchButtonEl.click();\n  }\n});\n\nloadMoreInputButtonEl.addEventListener('click', event => {\n  page += 1;\n  loadMorePhotosInput();\n});\n"],"names":["$knVcn","parcelRequire","$9a5745b8d2152452$var$inputEl","document","querySelector","$9a5745b8d2152452$var$searchButtonEl","$9a5745b8d2152452$var$warningEl","$9a5745b8d2152452$var$galleryEl","$9a5745b8d2152452$var$loadMoreInputButtonEl","$9a5745b8d2152452$var$page","style","visibility","$9a5745b8d2152452$var$getMoviesSearch","async","$3bAln","spinner","searchMovieAPI_URL","movies","$hGVxz","default","get","value","data","results","getGenres","removeSpinner","error","console","$9a5745b8d2152452$var$createMovieCardSearch","log","map","movie","genreNames","genre_ids","slice","genreId","genreList","join","poster_path","title","id","release_date","Math","round","vote_average","addEventListener","event","preventDefault","hidden","then","length","innerHTML","key","click","insertAdjacentHTML"],"version":3,"file":"index.e4ff95c9.js.map"}