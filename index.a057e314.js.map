{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAIA,MAAMC,EAAUC,SAASC,cAAc,6BACjCC,EAAiBF,SAASC,cAAc,8BACxCE,EAAYH,SAASC,cAAc,kBACnCG,EAAYJ,SAASC,cAAc,+BAIzCG,EAAUC,MAAMC,WAAa,SA4C7BJ,EAAeK,iBAAiB,SAASC,IACvCA,EAAMC,iBA3CUC,WAChB,IACE,MAAMC,EAAqB,4CAMrBC,SALeC,EAAAC,QAAMC,IACzB,GAAGJ,oDAA+CZ,EAAQiB,gCAItCC,KAAKC,QAI3B,aAFM,EAAArB,EAAAsB,aAECP,CAGT,CAFE,MAAOQ,GACPC,QAAQD,MAAMA,EAChB,GA6BAE,GAAYC,MAAKX,IAIO,IAAlBA,EAAOY,QACTrB,EAAUsB,UAAY,GACtB1B,EAAQiB,MAAQ,GAChBZ,EAAUC,MAAMC,WAAa,YAE7BF,EAAUC,MAAMC,WAAa,SAC7BH,EAAUsB,UApCQ,CAAAb,GAEfA,EACJc,KAAIC,IACH,MAAMC,EAAaD,EAAME,UACtBC,MAAM,EAAG,GACTJ,KAAIK,GAAWlC,EAAAmC,UAAUD,KACzBE,KAAK,MACR,MAAO,2GACLN,EAAMO,+BACYP,EAAMQ,iIAGSR,EAAMQ,uDACNP,qDACED,EAAMS,aAAaN,MAAM,EAAG,iEAE/BO,KAAKC,MAA2B,GAArBX,EAAMY,cAAqB,gCAErE,IAEJN,KAAK,IAekBO,CAAgB5B,GACxC,GACF,IAGFb,EAAQQ,iBAAiB,YAAYC,IACjB,UAAdA,EAAMiC,MACRjC,EAAMC,iBACNP,EAAewC,QACjB","sources":["src/js/header-home.js"],"sourcesContent":["import { genreList, getGenres } from './fetch-genres';\n\nimport axios from 'axios';\n\nconst inputEl = document.querySelector('.header-search-bar__input');\nconst searchButtonEl = document.querySelector('.header-search-bar__button');\nconst galleryEl = document.querySelector('.cards-wrapper');\nconst warningEl = document.querySelector('.header-search-bar__warning');\n\nconst API_key = 'dbea77d3eb5b3622b027f73f6a5032fe';\n\nwarningEl.style.visibility = 'hidden';\n\nconst getMovies = async () => {\n  try {\n    const searchMovieAPI_URL = 'https://api.themoviedb.org/3/search/movie';\n    const result = await axios.get(\n      `${searchMovieAPI_URL}?api_key=${API_key}&query=${inputEl.value}&page=1&language=en-US`,\n    );\n\n    // console.log('response getMovies', result);\n    const movies = result.data.results;\n    // console.log('movies', movies);\n    await getGenres();\n\n    return movies;\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nconst createMovieCard = movies => {\n  // console.log('movies', movies);\n  return movies\n    .map(movie => {\n      const genreNames = movie.genre_ids\n        .slice(0, 3)\n        .map(genreId => genreList[genreId])\n        .join(', ');\n      return `<div id=\"card\" class=\"card\"><img class=\"card__poster\" src='https://image.tmdb.org/t/p/w220_and_h330_face${\n        movie.poster_path\n      }' alt='Poster of ${movie.title} movie'></a>\n    <div class=\"card__info\">\n      <div class=\"card__quick-info\">\n        <div class=\"card__movie-title\">${movie.title}</div>\n        <div class=\"card__movie-genre\">${genreNames}</div>\n        <div class=\"card__movie-release\">${movie.release_date.slice(0, 4)}</div>\n      </div>\n      <div class=\"card__movie-rating\">${Math.round(movie.vote_average * 10) / 10}</div>\n    </div>\n  </div>`;\n    })\n    .join('');\n};\n\nsearchButtonEl.addEventListener('click', event => {\n  event.preventDefault();\n  getMovies().then(movies => {\n    // const movieData = movies;\n    // console.log('movieData', movieData);\n\n    if (movies.length === 0) {\n      galleryEl.innerHTML = '';\n      inputEl.value = '';\n      warningEl.style.visibility = 'visible';\n    } else {\n      warningEl.style.visibility = 'hidden';\n      galleryEl.innerHTML = createMovieCard(movies);\n    }\n  });\n});\n\ninputEl.addEventListener('keypress', event => {\n  if (event.key === 'Enter') {\n    event.preventDefault();\n    searchButtonEl.click();\n  }\n});\n"],"names":["$knVcn","parcelRequire","$9a5745b8d2152452$var$inputEl","document","querySelector","$9a5745b8d2152452$var$searchButtonEl","$9a5745b8d2152452$var$galleryEl","$9a5745b8d2152452$var$warningEl","style","visibility","addEventListener","event","preventDefault","async","searchMovieAPI_URL","movies","$hGVxz","default","get","value","data","results","getGenres","error","console","$9a5745b8d2152452$var$getMovies","then","length","innerHTML","map","movie","genreNames","genre_ids","slice","genreId","genreList","join","poster_path","title","release_date","Math","round","vote_average","$9a5745b8d2152452$var$createMovieCard","key","click"],"version":3,"file":"index.a057e314.js.map"}