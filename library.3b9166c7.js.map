{"mappings":"sgBAAA,IAAAA,EAAAC,EAAA,S,aAGA,MACMC,EAAYC,SAASC,cAAc,kBACnCC,EAA2BF,SAASC,cAAc,uBAExD,IAAIE,EAAO,EAEX,MAAMC,EAAcC,UAClB,IACE,MAAMC,EAAwB,kDAKxBC,SAJeC,EAAAC,QAAMC,IACzB,GAAGJ,mDAAiDH,qBAGhCQ,KAAKC,QAC3BC,QAAQC,IAAI,SAAUP,GACSP,SAASC,cAAc,cAAcc,QAAS,EAG7E,aAFM,EAAAlB,EAAAmB,aAECT,CAGT,CAFE,MAAOU,GACPJ,QAAQI,MAAMA,EAChB,GAGIC,EAAkBX,GACfA,EACJY,KAAIC,IACH,MAAMC,EAAaD,EAAME,UACtBC,MAAM,EAAG,GACTJ,KAAIK,GAAW3B,EAAA4B,UAAUD,KACzBE,KAAK,MACR,MAAO,6FACLN,EAAMO,+BACYP,EAAMQ,yBAAyBR,EAAMS,wHAGtBT,EAAMQ,uDACNP,qDACED,EAAMU,aAAaP,MAAM,EAAG,iEAE/BQ,KAAKC,MAA2B,GAArBZ,EAAMa,cAAqB,gCAErE,IAEJP,KAAK,IAGVtB,IAAc8B,MAAK3B,IACjBR,EAAUoC,UAAYjB,EAAgBX,GACtCJ,GAAQ,KASVD,EAAyBkC,iBAAiB,SAASC,IACjDlC,GAAQ,EANRC,IAAc8B,MAAK3B,IACjBR,EAAUuC,mBAAmB,YAAapB,EAAgBX,GAAA,GAM5D,G","sources":["src/js/popular.js"],"sourcesContent":["import { genreList, getGenres } from './fetch-genres';\nimport axios from 'axios';\n\nconst API_key = 'dbea77d3eb5b3622b027f73f6a5032fe';\nconst galleryEl = document.querySelector('.cards-wrapper');\nconst loadMoreTrendingButtonEl = document.querySelector('.load-more-trending');\n\nlet page = 1;\n\nconst getTrending = async () => {\n  try {\n    const searchTrendingAPI_URL = 'https://api.themoviedb.org/3/trending/movie/day';\n    const result = await axios.get(\n      `${searchTrendingAPI_URL}?api_key=${API_key}&page=${page}&language=en-US`,\n    );\n\n    const movies = result.data.results;\n    console.log('movies', movies);\n    const loadMoreInputButtonEl = (document.querySelector('.load-more').hidden = true);\n    await getGenres();\n\n    return movies;\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nconst createMovieCard = movies => {\n  return movies\n    .map(movie => {\n      const genreNames = movie.genre_ids\n        .slice(0, 3)\n        .map(genreId => genreList[genreId])\n        .join(', ');\n      return `<div id=\"card\" class=\"card\"><img class=\"card__poster\" src='https://image.tmdb.org/t/p/w500${\n        movie.poster_path\n      }' alt='Poster of ${movie.title} movie' data-id=\"${movie.id}\"></a>\n    <div class=\"card__info\">\n      <div class=\"card__quick-info\">\n        <div class=\"card__movie-title\">${movie.title}</div>\n        <div class=\"card__movie-genre\">${genreNames}</div>\n        <div class=\"card__movie-release\">${movie.release_date.slice(0, 4)}</div>\n      </div>\n      <div class=\"card__movie-rating\">${Math.round(movie.vote_average * 10) / 10}</div>\n    </div>\n  </div>`;\n    })\n    .join('');\n};\n\ngetTrending().then(movies => {\n  galleryEl.innerHTML = createMovieCard(movies);\n  page += 1;\n});\n\nconst loadMorePhotos = () => {\n  getTrending().then(movies => {\n    galleryEl.insertAdjacentHTML('beforeend', createMovieCard(movies));\n  });\n};\n\nloadMoreTrendingButtonEl.addEventListener('click', event => {\n  page += 1;\n  loadMorePhotos();\n});\n"],"names":["$knVcn","parcelRequire","$65d015308f60081e$var$galleryEl","document","querySelector","$65d015308f60081e$var$loadMoreTrendingButtonEl","$65d015308f60081e$var$page","$65d015308f60081e$var$getTrending","async","searchTrendingAPI_URL","movies","$hGVxz","default","get","data","results","console","log","hidden","getGenres","error","$65d015308f60081e$var$createMovieCard","map","movie","genreNames","genre_ids","slice","genreId","genreList","join","poster_path","title","id","release_date","Math","round","vote_average","then","innerHTML","addEventListener","event","insertAdjacentHTML"],"version":3,"file":"library.3b9166c7.js.map"}