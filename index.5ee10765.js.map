{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAIA,MAAMC,EAAUC,SAASC,cAAc,6BACjCC,EAAiBF,SAASC,cAAc,8BACxCE,EAAYH,SAASC,cAAc,+BAEzC,IAAIG,EAAc,EAGlB,MAEMC,EAAoBL,SAASM,eAAe,gBAC5CC,EAAkBP,SAASM,eAAe,cAC1CE,EAAmBR,SAASM,eAAe,eAC3CG,EAA0BT,SAASM,eAAe,kBAClDI,EAA0BV,SAASM,eAAe,kBAClDK,EAA4BX,SAASM,eAAe,kBACpDM,EAA4BZ,SAASM,eAAe,kBACpDO,EAAkBb,SAASM,eAAe,cAC1CQ,EAAiBd,SAASM,eAAe,aACzCS,EAAUf,SAASM,eAAe,SAClCU,EAAUhB,SAASM,eAAe,SAClCW,EAAYjB,SAASC,cAAc,kBAIzCE,EAAUe,MAAMC,WAAa,SAE7B,MAAMC,EAAYC,UAChB,IACE,MAAMC,EAAqB,4CAMrBC,SALeC,EAAAC,QAAMC,IACzB,GAAGJ,oDAA+CvB,EAAQ4B,cAAcvB,qBAIpDwB,KAAKC,QAI3B,aAFM,EAAAhC,EAAAiC,aAECP,CAGT,CAFE,MAAOQ,GACPC,QAAQD,MAAMA,EAChB,GAGIE,EAAkBV,GAEfA,EACJW,KAAIC,IACH,MAAMC,EAAaD,EAAME,UACtBC,MAAM,EAAG,GACTJ,KAAIK,GAAW1C,EAAA2C,UAAUD,KACzBE,KAAK,MACR,MAAO,2GACLN,EAAMO,+BACYP,EAAMQ,iIAGSR,EAAMQ,uDACNP,qDACED,EAAMS,aAAaN,MAAM,EAAG,iEAE/BO,KAAKC,MAA2B,GAArBX,EAAMY,cAAqB,gCAErE,IAEJN,KAAK,IAGVvC,EAAe8C,iBAAiB,SAASC,IACvCA,EAAMC,iBACN9B,IAAY+B,MAAK5B,IAIO,IAAlBA,EAAO6B,QACTnC,EAAUoC,UAAY,GACtBtD,EAAQ4B,MAAQ,GAChBxB,EAAUe,MAAMC,WAAa,YAE7BhB,EAAUe,MAAMC,WAAa,SAC7BF,EAAUoC,UAAYpB,EAAgBV,GACxC,GACF,IAGFxB,EAAQiD,iBAAiB,YAAYC,IACjB,UAAdA,EAAMK,MACRL,EAAMC,iBACNhD,EAAeqD,QACjB,IAIF,MAAMC,EAAa,KACjBpC,IAAY+B,MAAK5B,IAIO,IAAlBA,EAAO6B,QACTnC,EAAUoC,UAAY,GACtBtD,EAAQ4B,MAAQ,GAChBxB,EAAUe,MAAMC,WAAa,YAE7BhB,EAAUe,MAAMC,WAAa,SAC7BF,EAAUoC,UAAYpB,EAAgBV,GACxC,IAEkB,IAAhBnB,GACFC,EAAkBgD,UAAYjD,EAC9BG,EAAgBW,MAAMC,WAAa,SACnCV,EAAwB4C,UAAYjD,EAAc,EAClDM,EAAwB2C,UAAYjD,EAAc,EAClDO,EAA0B0C,UAAY,GACtCzC,EAA0ByC,UAAY,GACtCtC,EAAQsC,UAAY,GACpBrC,EAAQqC,UAAY,MACpBvC,EAAeuC,UA9GJ,GA+GXxC,EAAgBwC,UAAY,IACH,IAAhBjD,GACTC,EAAkBgD,UAAYjD,EAC9BG,EAAgBW,MAAMC,WAAa,UACnCV,EAAwB4C,UAAYjD,EAAc,EAClDM,EAAwB2C,UAAYjD,EAAc,EAClDO,EAA0B0C,UAAYjD,EAAc,EACpDQ,EAA0ByC,UAAY,GACtCxC,EAAgBwC,UAAY,GAC5BtC,EAAQsC,UAAY,IACK,IAAhBjD,GACTC,EAAkBgD,UAAYjD,EAC9BO,EAA0B0C,UAAYjD,EAAc,EACpDQ,EAA0ByC,UAAYjD,EAAc,EACpDK,EAAwB4C,UAAYjD,EAAc,EAClDM,EAAwB2C,UAAYjD,EAAc,EAClDS,EAAgBwC,UAAY,GAC5BtC,EAAQsC,UAAY,IACK,IAAhBjD,GACTC,EAAkBgD,UAAYjD,EAC9BO,EAA0B0C,UAAYjD,EAAc,EACpDQ,EAA0ByC,UAAYjD,EAAc,EACpDK,EAAwB4C,UAAYjD,EAAc,EAClDM,EAAwB2C,UAAYjD,EAAc,EAClDW,EAAQsC,UAxII,EAyIZxC,EAAgBwC,UAAY,IACnBjD,GAAe,IACxBC,EAAkBgD,UAAYjD,EAC9BK,EAAwB4C,UAAYjD,EAAc,EAClDM,EAAwB2C,UAAYjD,EAAc,EAClDO,EAA0B0C,UAAYjD,EAAc,EACpDQ,EAA0ByC,UAAYjD,EAAc,EACpDW,EAAQsC,UAAY,MACpBrC,EAAQqC,UAAY,MACpBxC,EAAgBwC,UAlJJ,EAmJZvC,EAAeuC,UAlJJ,IAoJbrB,QAAQyB,IAAIrD,EAAA,EAEdoD,IACA,MAAME,EAAmBC,IACvBvD,GAAeuD,EACfH,GAAA,EAaF3C,EAAgBmC,iBAAiB,SAASY,IACxCA,EAAEV,iBAVF9C,EA9Jc,EA+JdoD,GAUA,IAGF1C,EAAekC,iBAAiB,SAASY,IACvCA,EAAEV,iBACF3C,EAAgBW,MAAMC,WAAa,UAXnCf,EAlKa,GAmKboD,GAWA,IAGFjD,EAAgByC,iBAAiB,SAASY,IACxCA,EAAEV,iBACFQ,GAAiB,MAEnB/C,EAA0BqC,iBAAiB,SAASY,IAClDA,EAAEV,iBACFQ,GAAiB,MAGnBlD,EAAiBwC,iBAAiB,SAASY,IACzCA,EAAEV,iBACFQ,EAAiB,MAEnBjD,EAAwBuC,iBAAiB,SAASY,IAChDA,EAAEV,iBACFQ,EAAiB,MAGnB9C,EAA0BoC,iBAAiB,SAASY,IAClDA,EAAEV,iBACFQ,GAAiB,MAEnBhD,EAAwBsC,iBAAiB,SAASY,IAChDA,EAAEV,iBACFQ,EAAiB,MAGnBhD,EAAwBsC,iBAAiB,SAASY,IAChDA,EAAEV,iBACFQ,EAAiB","sources":["src/js/header-home.js"],"sourcesContent":["import { genreList, getGenres } from './fetch-genres';\n\nimport axios from 'axios';\n\nconst inputEl = document.querySelector('.header-search-bar__input');\nconst searchButtonEl = document.querySelector('.header-search-bar__button');\nconst warningEl = document.querySelector('.header-search-bar__warning');\n// Pagination elements\nlet currentPage = 1;\nlet firstPage = 1;\nlet lastPage = 20;\nconst moviesPerPage = 2;\n\nconst currentPageButton = document.getElementById('current-page');\nconst arrowLeftButton = document.getElementById('arrow-left');\nconst arrowRightButton = document.getElementById('arrow-right');\nconst currentPageAddOneButton = document.getElementById('current-page+1');\nconst currentPageAddTwoButton = document.getElementById('current-page+2');\nconst currentPageMinusOneButton = document.getElementById('current-page-1');\nconst currentPageMinusTwoButton = document.getElementById('current-page-2');\nconst firstPageButton = document.getElementById('first-page');\nconst lastPageButton = document.getElementById('last-page');\nconst dots1El = document.getElementById('dots1');\nconst dots2El = document.getElementById('dots2');\nconst galleryEl = document.querySelector('.cards-wrapper');\n// ------------------------------------------------------------------------------------------\nconst API_key = 'dbea77d3eb5b3622b027f73f6a5032fe';\n\nwarningEl.style.visibility = 'hidden';\n\nconst getMovies = async () => {\n  try {\n    const searchMovieAPI_URL = 'https://api.themoviedb.org/3/search/movie';\n    const result = await axios.get(\n      `${searchMovieAPI_URL}?api_key=${API_key}&query=${inputEl.value}&page=${currentPage}&language=en-US`,\n    );\n\n    // console.log('response getMovies', result);\n    const movies = result.data.results;\n    // console.log('movies', movies);\n    await getGenres();\n\n    return movies;\n  } catch (error) {\n    console.error(error);\n  }\n};\n\nconst createMovieCard = movies => {\n  // console.log('movies', movies);\n  return movies\n    .map(movie => {\n      const genreNames = movie.genre_ids\n        .slice(0, 3)\n        .map(genreId => genreList[genreId])\n        .join(', ');\n      return `<div id=\"card\" class=\"card\"><img class=\"card__poster\" src='https://image.tmdb.org/t/p/w220_and_h330_face${\n        movie.poster_path\n      }' alt='Poster of ${movie.title} movie'></a>\n    <div class=\"card__info\">\n      <div class=\"card__quick-info\">\n        <div class=\"card__movie-title\">${movie.title}</div>\n        <div class=\"card__movie-genre\">${genreNames}</div>\n        <div class=\"card__movie-release\">${movie.release_date.slice(0, 4)}</div>\n      </div>\n      <div class=\"card__movie-rating\">${Math.round(movie.vote_average * 10) / 10}</div>\n    </div>\n  </div>`;\n    })\n    .join('');\n};\n\nsearchButtonEl.addEventListener('click', event => {\n  event.preventDefault();\n  getMovies().then(movies => {\n    // const movieData = movies;\n    // console.log('movieData', movieData);\n\n    if (movies.length === 0) {\n      galleryEl.innerHTML = '';\n      inputEl.value = '';\n      warningEl.style.visibility = 'visible';\n    } else {\n      warningEl.style.visibility = 'hidden';\n      galleryEl.innerHTML = createMovieCard(movies);\n    }\n  });\n});\n\ninputEl.addEventListener('keypress', event => {\n  if (event.key === 'Enter') {\n    event.preventDefault();\n    searchButtonEl.click();\n  }\n});\n\n// Pagination\nconst updatePage = () => {\n  getMovies().then(movies => {\n    // const movieData = movies;\n    // console.log('movieData', movieData);\n\n    if (movies.length === 0) {\n      galleryEl.innerHTML = '';\n      inputEl.value = '';\n      warningEl.style.visibility = 'visible';\n    } else {\n      warningEl.style.visibility = 'hidden';\n      galleryEl.innerHTML = createMovieCard(movies);\n    }\n  });\n  if (currentPage === 1) {\n    currentPageButton.innerHTML = currentPage;\n    arrowLeftButton.style.visibility = 'hidden';\n    currentPageAddOneButton.innerHTML = currentPage + 1;\n    currentPageAddTwoButton.innerHTML = currentPage + 2;\n    currentPageMinusOneButton.innerHTML = '';\n    currentPageMinusTwoButton.innerHTML = '';\n    dots1El.innerHTML = '';\n    dots2El.innerHTML = '...';\n    lastPageButton.innerHTML = lastPage;\n    firstPageButton.innerHTML = ``;\n  } else if (currentPage === 2) {\n    currentPageButton.innerHTML = currentPage;\n    arrowLeftButton.style.visibility = 'visible';\n    currentPageAddOneButton.innerHTML = currentPage + 1;\n    currentPageAddTwoButton.innerHTML = currentPage + 2;\n    currentPageMinusOneButton.innerHTML = currentPage - 1;\n    currentPageMinusTwoButton.innerHTML = ``;\n    firstPageButton.innerHTML = ``;\n    dots1El.innerHTML = '';\n  } else if (currentPage === 3) {\n    currentPageButton.innerHTML = currentPage;\n    currentPageMinusOneButton.innerHTML = currentPage - 1;\n    currentPageMinusTwoButton.innerHTML = currentPage - 2;\n    currentPageAddOneButton.innerHTML = currentPage + 1;\n    currentPageAddTwoButton.innerHTML = currentPage + 2;\n    firstPageButton.innerHTML = ``;\n    dots1El.innerHTML = '';\n  } else if (currentPage === 4) {\n    currentPageButton.innerHTML = currentPage;\n    currentPageMinusOneButton.innerHTML = currentPage - 1;\n    currentPageMinusTwoButton.innerHTML = currentPage - 2;\n    currentPageAddOneButton.innerHTML = currentPage + 1;\n    currentPageAddTwoButton.innerHTML = currentPage + 2;\n    dots1El.innerHTML = firstPage;\n    firstPageButton.innerHTML = ``;\n  } else if (currentPage >= 4) {\n    currentPageButton.innerHTML = currentPage;\n    currentPageAddOneButton.innerHTML = currentPage + 1;\n    currentPageAddTwoButton.innerHTML = currentPage + 2;\n    currentPageMinusOneButton.innerHTML = currentPage - 1;\n    currentPageMinusTwoButton.innerHTML = currentPage - 2;\n    dots1El.innerHTML = '...';\n    dots2El.innerHTML = '...';\n    firstPageButton.innerHTML = firstPage;\n    lastPageButton.innerHTML = lastPage;\n  }\n  console.log(currentPage);\n};\nupdatePage();\nconst handlePageUpdate = increment => {\n  currentPage += increment;\n  updatePage();\n};\n\nconst handleFirstPage = () => {\n  currentPage = firstPage;\n  updatePage();\n};\n\nconst handleLastPage = () => {\n  currentPage = lastPage;\n  updatePage();\n};\n\nfirstPageButton.addEventListener('click', e => {\n  e.preventDefault();\n  handleFirstPage();\n});\n\nlastPageButton.addEventListener('click', e => {\n  e.preventDefault();\n  arrowLeftButton.style.visibility = 'visible';\n  handleLastPage();\n});\n\narrowLeftButton.addEventListener('click', e => {\n  e.preventDefault();\n  handlePageUpdate(-1);\n});\ncurrentPageMinusOneButton.addEventListener('click', e => {\n  e.preventDefault();\n  handlePageUpdate(-1);\n});\n\narrowRightButton.addEventListener('click', e => {\n  e.preventDefault();\n  handlePageUpdate(1);\n});\ncurrentPageAddOneButton.addEventListener('click', e => {\n  e.preventDefault();\n  handlePageUpdate(1);\n});\n\ncurrentPageMinusTwoButton.addEventListener('click', e => {\n  e.preventDefault();\n  handlePageUpdate(-2);\n});\ncurrentPageAddTwoButton.addEventListener('click', e => {\n  e.preventDefault();\n  handlePageUpdate(2);\n});\n\ncurrentPageAddTwoButton.addEventListener('click', e => {\n  e.preventDefault();\n  handlePageUpdate(2);\n});\n"],"names":["$knVcn","parcelRequire","$9a5745b8d2152452$var$inputEl","document","querySelector","$9a5745b8d2152452$var$searchButtonEl","$9a5745b8d2152452$var$warningEl","$9a5745b8d2152452$var$currentPage","$9a5745b8d2152452$var$currentPageButton","getElementById","$9a5745b8d2152452$var$arrowLeftButton","$9a5745b8d2152452$var$arrowRightButton","$9a5745b8d2152452$var$currentPageAddOneButton","$9a5745b8d2152452$var$currentPageAddTwoButton","$9a5745b8d2152452$var$currentPageMinusOneButton","$9a5745b8d2152452$var$currentPageMinusTwoButton","$9a5745b8d2152452$var$firstPageButton","$9a5745b8d2152452$var$lastPageButton","$9a5745b8d2152452$var$dots1El","$9a5745b8d2152452$var$dots2El","$9a5745b8d2152452$var$galleryEl","style","visibility","$9a5745b8d2152452$var$getMovies","async","searchMovieAPI_URL","movies","$hGVxz","default","get","value","data","results","getGenres","error","console","$9a5745b8d2152452$var$createMovieCard","map","movie","genreNames","genre_ids","slice","genreId","genreList","join","poster_path","title","release_date","Math","round","vote_average","addEventListener","event","preventDefault","then","length","innerHTML","key","click","$9a5745b8d2152452$var$updatePage","log","$9a5745b8d2152452$var$handlePageUpdate","increment","e"],"version":3,"file":"index.5ee10765.js.map"}