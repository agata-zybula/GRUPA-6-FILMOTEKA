{"mappings":"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","sources":["src/js/modal.js","src/js/get-local-storage.js"],"sourcesContent":["import { createMovieCard } from './create-movie-card';\nimport \"./get-local-storage\";\n// import { renderModalMarkup } from './render-modal-markup';\n\n// Open or close modal\nconst openModal = document.querySelector('[data-modal-open]');\nconst openModalOnCard = document.querySelector('.card');\nconst modalWindow = document.querySelector('.modal__window');\nconst closeModal = document.querySelector('[data-modal-close]');\nconst modal = document.querySelector('[data-modal]');\nconst cardEl = document.querySelectorAll(\".card\");\n\nfunction toggleModal() {\n  modal.classList.toggle('is-hidden');\n}\n\nfunction offModalForEscape(e) {\n  if (e.key === 'Escape') {\n    modal.classList.add('is-hidden');\n  }\n}\n\ndocument.addEventListener('keydown', offModalForEscape);\n\nfunction offModalClick(event) {\n  if (event.target !== modalWindow) {\n    modal.classList.add(\"is-hidden\");\n  }\n}\nwindow.addEventListener(\"click\", offModalClick);\n\nconst posters = document.querySelector('.cards-wrapper');\nposters.addEventListener('click', selectFilm);\n\nfunction selectFilm(event) {\n  let filmId = event.target.dataset.id;\n\n  getMovieData(filmId);\n  toggleModal();\n}\n\n// function modalHandler() {\n\n//   function renderModal() {\n//     openModalOnCard.forEach(function(event) {\n//       event.addEventListener(\"click\", () => {\n//         modal.classList.remove(\"is-hidden\")\n\n//       })\n//       document.addEventListener(\"keydown\", closeOnESC);\n//       document.addEventListener(\"click\", closeOnBackdrop);\n//       document.addEventListener(\"click\", closeOnButton);\n//     })\n//     // modal.classList.remove(\"is-hidden\");\n//     // document.addEventListener(\"keydown\", closeOnESC);\n//     // document.addEventListener(\"click\", closeOnBackdrop);\n//     // document.addEventListener(\"click\", closeOnButton);\n//   }\n\n//   function closeModal() {\n//     modal.classList.add(\"is-hidden\");\n//     document.removeEventListener(\"keyup\", closeOnESC);\n//     document.removeEventListener(\"click\", closeOnBackdrop);\n//     document.removeEventListener(\"click\", closeOnButton);\n//   }\n\n//   function closeOnESC(event) {\n//     if (event.key === \"Escape\") {\n//       closeModal();\n//     }\n//   }\n\n//   function closeOnBackdrop(event) {\n//     if (event.target !== modal) {\n//       closeModal();\n//     }\n//   }\n\n//   function closeOnButton(event) {\n//     if (event.target === closeModal) {\n//       closeModal();\n//     }\n//   }\n// };\n\n// modalHandler();\n\n// Fetch movie info\nconst titleEl = document.querySelector('h2.modal__title');\nconst voteRatingEl = document.getElementById('queryVoteRating');\nconst voteCountEl = document.getElementById('queryVoteCount');\nconst popularityEl = document.getElementById('queryPopularity');\nconst originalTitleEl = document.getElementById('queryOriginalTitle');\nconst genreEl = document.getElementById('queryGenre');\nconst posterEl = document.querySelector('.modal__poster');\nconst overviewEl = document.querySelector('.modal__summary-text');\n\n\n// Fetch trending\nconst inputEl = document.querySelector('.header-search-bar__input');\n\nconst searchMovieAPI_URL = 'https://api.themoviedb.org/3/search/movie';\nconst API_key = 'dbea77d3eb5b3622b027f73f6a5032fe';\n\nconst findMovieApi_URL = 'https://api.themoviedb.org/3/movie/';\n\nconst fetchMovies = async () => {\n  const response = await fetch(\n    `${searchMovieAPI_URL}?api_key=${API_key}&query=${inputEl.value}&page=1&language=en-US`,\n  );\n  return response.json();\n};\n\nasync function getMovieById(filmId) {\n  const response = await fetch(`${findMovieApi_URL}/${filmId}?api_key=${API_key}`);\n  return response.json();\n}\n\nfunction getMovieData(filmId) {\n  getMovieById(filmId).then(movies => {\n    const movieData = movies;\n\n    const movie = {\n      id: movieData.id,\n      title: movieData.title,\n      vote_average: movieData.vote_average,\n      vote_count: movieData.vote_count,\n      popularity: movieData.popularity,\n      originalTitle: movieData.original_title,\n      // genre: movies.genre_ids,\n      overview: movieData.overview,\n      poster_path: movieData.poster_path,\n    };\n\n    console.log(movie);\n\n    let modal = document.querySelector('.modal');\n    const closeModal = document.querySelector('[data-modal-close]');\n    const posterEl = document.querySelector('.modal__poster');\n    const titleEl = document.querySelector('h2.modal__title');\n    const voteRatingEl = document.getElementById('queryVoteRating');\n    const voteCountEl = document.getElementById('queryVoteCount');\n    const popularityEl = document.getElementById('queryPopularity');\n    const originalTitleEl = document.getElementById('queryOriginalTitle');\n    // const genreEl = getElementById(\"queryGenre\");\n    const overviewEl = document.querySelector('.modal__summary-text');\n    const dataId = document.querySelector(\".id\")\n\n    modal.classList.remove(\"is-hidden\");\n    posterEl.src = `https://image.tmdb.org/t/p/w220_and_h330_face/${movie.poster_path}`;\n    titleEl.innerHTML = `${movie.title}`;\n    console.log(`${movie.title}`);\n    voteRatingEl.innerHTML = `${movie.vote_average}`;\n    //voteCountEl.innerHTML = `${movie.vote_count}`;\n    popularityEl.innerHTML = `${movie.popularity}`;\n    originalTitleEl.innerHTML = `${movie.originalTitle}`;\n    overviewEl.innerHTML = `${movie.overview}`;\n    dataId.innerHTML = `${movie.id}`\n\n    closeModal.addEventListener(\"click\", () => {\n      modal.classList.add(\"is-hidden\");\n    });\n  });\n}\n","const API_key = \"dbea77d3eb5b3622b027f73f6a5032fe\";\nconst findMovieApi_URL = \"https://api.themoviedb.org/3/movie/\";\n\nasync function getMovieById(filmId) {\n  const response = await fetch(`${findMovieApi_URL}/${filmId}?api_key=${API_key}`);\n  return response.json();\n}\n\nfunction getMovieData(filmId) {\n  getMovieById(filmId).then(movies => {\n    const movieData = movies;\n\n    const movie = {\n      title: movieData.title,\n      vote_average: movieData.vote_average,\n      vote_count: movieData.vote_count,\n      popularity: movieData.popularity,\n      originalTitle: movieData.original_title,\n      // genre: movies.genre_ids,\n      overview: movieData.overview,\n      poster_path: movieData.poster_path,\n    };\n    console.log(movie);\n  });\n}\n\nconst createMovieCardSearch = movies => {\n  // console.log('movies', movies);\n  return movies\n    .map(movie => {\n      const genreNames = movie.genre_ids\n        .slice(0, 3)\n        .map(genreId => genreList[genreId])\n        .join(', ');\n      return `<div id=\"card\" class=\"card\"><img class=\"card__poster\" src='https://image.tmdb.org/t/p/w220_and_h330_face${\n        movie.poster_path\n      }' alt=Poster of ${movie.title} movie data-id=\"${movie.id}\"></a>\n    <div class=\"card__info\">\n      <div class=\"card__quick-info\">\n        <div class=\"card__movie-title\">${movie.title}</div>\n        <div class=\"card__movie-genre\">${genreNames}</div>\n        <div class=\"card__movie-release\">${movie.release_date.slice(0, 4)}</div>\n      </div>\n      <div class=\"card__movie-rating\">${Math.round(movie.vote_average * 10) / 10}</div>\n    </div>\n  </div>`;\n    })\n    .join('');\n};\n\n        //   if (!getFromLocalStorage(STORAGE_WATCHED) || getFromLocalStorage(STORAGE_WATCHED).length === 0) {\n        //         galleryEl.innerHTML = \"There are no movies in 'Watched'.\";\n        //         return;\n        //     } else {\nexport function getInfoFromLocalStorageHandler() {\n\n    const headerWatchedButton = document.getElementById(\"watchedButton\");\n    const headerQueuedButton = document.getElementById(\"queuedButton\");\n    \n    function getFromLocalStorage(key) {\n        const savedData = localStorage.getItem(key);\n        const parsedData = JSON.parse(savedData);\n        return parsedData;\n    }\n\n    async function renderWatchedMovies(STORAGE_WATCHED) {\n        const galleryEl = document.querySelector(\".cards-wrapper\");\n        // event.preventDefault();\n        getMovieData(filmId).then(movies => {\n            if (!getFromLocalStorage(STORAGE_WATCHED) || getFromLocalStorage(STORAGE_WATCHED).length === 0) {\n                galleryEl.innerHTML = \"aaaa\"\n            } else {\n                galleryEl.innerHTML = createMovieCardSearch(movies);\n            }\n        })\n    }\n    \n    headerWatchedButton.addEventListener(\"click\", () => {\n        if (!headerWatchedButton.classList.contains(\"watched__button--active\")) {\n            headerWatchedButton.classList.add(\"watched__button--active\");\n            headerQueuedButton.classList.remove(\"watched__button--active\");\n        }\n    });\n    \n    headerQueuedButton.addEventListener(\"click\", () => {\n        if (!headerQueuedButton.classList.contains(\"watched__button--active\")) {\n            headerQueuedButton.classList.add(\"watched__button--active\");\n            headerWatchedButton.classList.remove(\"watched__button--active\");\n        }\n    });\n\n    headerWatchedButton.addEventListener(\"click\", renderWatchedMovies);\n    // headerQueuedButton.addEventListener(\"click\", renderQueuedMovies);\n};\n\ngetInfoFromLocalStorageHandler();\n\n\n// // // const createMovieCardSearch = movies => {\n// // //   return movies\n// // //     .map(movie => {\n// // //       const genreNames = movie.genre_ids\n// // //         .slice(0, 3)\n// // //         .map(genreId => genreList[genreId])\n// // //         .join(', ');\n// // //       return `<div id=\"card\" class=\"card\"><img class=\"card__poster\" src='https://image.tmdb.org/t/p/w220_and_h330_face${\n// // //         movie.poster_path\n// // //       }' alt=Poster of ${movie.title} movie data-id=\"${movie.id}\"></a>\n// // //     <div class=\"card__info\">\n// // //       <div class=\"card__quick-info\">\n// // //         <div class=\"card__movie-title\">${movie.title}</div>\n// // //         <div class=\"card__movie-genre\">${genreNames}</div>\n// // //         <div class=\"card__movie-release\">${movie.release_date.slice(0, 4)}</div>\n// // //       </div>\n// // //       <div class=\"card__movie-rating\">${Math.round(movie.vote_average * 10) / 10}</div>\n// // //     </div>\n// // //   </div>`;\n// // //     })\n// // //     .join('');\n// // // };"],"names":["parcelRequire","document","querySelector","$2ea800676e6f7669$var$modalWindow","$2ea800676e6f7669$var$modal","querySelectorAll","addEventListener","e","key","classList","add","window","event","target","filmId","async","response","fetch","$2ea800676e6f7669$var$findMovieApi_URL","$2ea800676e6f7669$var$API_key","json","$2ea800676e6f7669$var$getMovieById","then","movies","movieData","movie","id","title","vote_average","vote_count","popularity","originalTitle","original_title","overview","poster_path","console","log","modal","closeModal","posterEl","titleEl","voteRatingEl","getElementById","popularityEl","originalTitleEl","overviewEl","dataId","remove","src","innerHTML","$2ea800676e6f7669$var$getMovieData","dataset","toggle","$13669445dccf0b5b$var$getMovieData","filmId1","$13669445dccf0b5b$var$getMovieById","headerWatchedButton","headerQueuedButton","getFromLocalStorage","savedData","localStorage","getItem","JSON","parse","contains","STORAGE_WATCHED","galleryEl","length","map","genreNames","genre_ids","slice","genreId","genreList","join","release_date","Math","round","$13669445dccf0b5b$var$createMovieCardSearch","$13669445dccf0b5b$export$902eef5c0ca51513"],"version":3,"file":"index.29e6f0d1.js.map"}