{"mappings":"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","sources":["src/js/modal.js","src/js/add-to-local-storage.js"],"sourcesContent":["import { createMovieCard } from './create-movie-card';\nimport { localStorageHandler } from './add-to-local-storage';\n// import { renderModalMarkup } from './render-modal-markup';\n\n// Open or close modal\nconst openModal = document.querySelector('[data-modal-open]');\nconst openModalOnCard = document.querySelector('.card');\nconst modalWindow = document.querySelector('.modal__window');\nconst closeModal = document.querySelector('[data-modal-close]');\nconst modal = document.querySelector('[data-modal]');\n\nfunction toggleModal() {\n  modal.classList.toggle('is-hidden');\n}\n\ndocument.addEventListener('keydown', offModalForEscape);\n\nfunction toggleModal() {\n  modal.classList.toggle('is-hidden');\n}\nfunction offModalForEscape(e) {\n  if (e.key === 'Escape') {\n    modal.classList.add('is-hidden');\n  }\n}\n\nconst posters = document.querySelector('.cards-wrapper');\nposters.addEventListener('click', selectFilm);\n\nfunction selectFilm(event) {\n  let filmId = event.target.dataset.id;\n\n  getMovieData(filmId);\n  toggleModal();\n}\n\n// function showModal(data) {\n//   const markup = renderModalMarkup(data);\n//   modal.insertAdjacentHTML(\"beforeend\", markup);\n// };\n\n// function modalHandler() {\n\n//   function renderModal() {\n//     openModalOnCard.forEach(function(event) {\n//       event.addEventListener(\"click\", () => {\n//         modal.classList.remove(\"is-hidden\")\n\n//       })\n//       document.addEventListener(\"keydown\", closeOnESC);\n//       document.addEventListener(\"click\", closeOnBackdrop);\n//       document.addEventListener(\"click\", closeOnButton);\n//     })\n//     // modal.classList.remove(\"is-hidden\");\n//     // document.addEventListener(\"keydown\", closeOnESC);\n//     // document.addEventListener(\"click\", closeOnBackdrop);\n//     // document.addEventListener(\"click\", closeOnButton);\n//   }\n\n//   function closeModal() {\n//     modal.classList.add(\"is-hidden\");\n//     document.removeEventListener(\"keyup\", closeOnESC);\n//     document.removeEventListener(\"click\", closeOnBackdrop);\n//     document.removeEventListener(\"click\", closeOnButton);\n//   }\n\n//   function closeOnESC(event) {\n//     if (event.key === \"Escape\") {\n//       closeModal();\n//     }\n//   }\n\n//   function closeOnBackdrop(event) {\n//     if (event.target !== modal) {\n//       closeModal();\n//     }\n//   }\n\n//   function closeOnButton(event) {\n//     if (event.target === closeModal) {\n//       closeModal();\n//     }\n//   }\n// };\n\n// modalHandler();\n\n//openModal.addEventListener('click', toggleModal);\ncloseModal.addEventListener('click', toggleModal);\n\n// Fetch movie info\nconst titleEl = document.querySelector('h2.modal__title');\nconst voteRatingEl = document.getElementById('queryVoteRating');\nconst voteCountEl = document.getElementById('queryVoteCount');\nconst popularityEl = document.getElementById('queryPopularity');\nconst originalTitleEl = document.getElementById('queryOriginalTitle');\nconst genreEl = document.getElementById('queryGenre');\nconst posterEl = document.querySelector('.modal__poster');\nconst overviewEl = document.querySelector('.modal__summary-text');\nconst cardEl = document.querySelector('.card');\n\n// Fetch trending\nconst inputEl = document.querySelector('.header-search-bar__input');\n\nconst searchMovieAPI_URL = 'https://api.themoviedb.org/3/search/movie';\nconst API_key = 'dbea77d3eb5b3622b027f73f6a5032fe';\n\nconst findMovieApi_URL = 'https://api.themoviedb.org/3/movie/';\n\nconst fetchMovies = async () => {\n  const response = await fetch(\n    `${searchMovieAPI_URL}?api_key=${API_key}&query=${inputEl.value}&page=1&language=en-US`,\n  );\n  return response.json();\n};\n\nasync function getMovieById(filmId) {\n  const response = await fetch(`${findMovieApi_URL}/${filmId}?api_key=${API_key}`);\n  return response.json();\n}\n\nfunction getMovieData(filmId) {\n  getMovieById(filmId).then(movies => {\n    const movieData = movies;\n\n    const movie = {\n      title: movieData.title,\n      vote_average: movieData.vote_average,\n      vote_count: movieData.vote_count,\n      popularity: movieData.popularity,\n      originalTitle: movieData.original_title,\n      // genre: movies.genre_ids,\n      overview: movieData.overview,\n      poster_path: movieData.poster_path,\n    };\n\n    console.log(movie);\n\n    //const modalShow = movie => {\n    //cardEl.addEventListener('click', () => {\n    //cardEl.forEach(movie => {\n    let modal = document.querySelector('.modal');\n    const closeModal = document.querySelector('[data-modal-close]');\n    const posterEl = document.querySelector('.modal__poster');\n    const titleEl = document.querySelector('h2.modal__title');\n    const voteRatingEl = document.getElementById('queryVoteRating');\n    const voteCountEl = document.getElementById('queryVoteCount');\n    const popularityEl = document.getElementById('queryPopularity');\n    const originalTitleEl = document.getElementById('queryOriginalTitle');\n    // const genreEl = getElementById(\"queryGenre\");\n    const overviewEl = document.querySelector('.modal__summary-text');\n\n    modal.classList.remove('is-hidden');\n    posterEl.src = `https://image.tmdb.org/t/p/w220_and_h330_face/${movie.poster_path}`;\n    titleEl.innerHTML = `${movie.title}`;\n    console.log(`${movie.title}`);\n    voteRatingEl.innerHTML = `${movie.vote_average}`;\n    //oteCountEl.innerHTML = `${movie.vote_count}`;\n    popularityEl.innerHTML = `${movie.popularity}`;\n    originalTitleEl.innerHTML = `${movie.originalTitle}`;\n    overviewEl.innerHTML = `${movie.overview}`;\n\n    closeModal.addEventListener('click', () => {\n      modal.classList.add('is-hidden');\n    });\n    //});\n    //});\n    //};\n  });\n}\n","export function localStorageHandler() {\n    const addToWatchedButton = document.getElementById(\"addToWatched\");\n    const addToQueueButton = document.getElementById(\"addToQueue\");\n    \n    let STORAGE_WATCHED = \"watched-movies\";\n    let STORAGE_QUEUED = \"queued-movies\";\n    \n    let moviesWatched = [];\n    let moviesQueued = [];\n\n    function addToWatched() {\n        \n        const titleEl = document.querySelector(\"h2.modal__title\");\n        const movieTitle = titleEl.innerHTML\n\n        const existingEntries = JSON.parse(localStorage.getItem(STORAGE_WATCHED) || '[]');\n        \n        if (!existingEntries.includes(movieTitle)) {\n            existingEntries.push(movieTitle);\n            \n            localStorage.setItem(STORAGE_WATCHED, JSON.stringify(existingEntries));\n        } else {\n            console.log(movieTitle + ' already exists')\n        }\n    }\n\n    function addToQueued() {\n        \n        const titleEl = document.querySelector(\"h2.modal__title\");\n        const movieTitle = titleEl.innerHTML\n\n        const existingEntries = JSON.parse(localStorage.getItem(STORAGE_QUEUED) || '[]');\n        \n        if (!existingEntries.includes(movieTitle)) {\n            existingEntries.push(movieTitle);\n            \n            localStorage.setItem(STORAGE_QUEUED, JSON.stringify(existingEntries));\n        } else {\n            console.log(movieTitle + ' already exists')\n        }\n    }\n    \n    addToWatchedButton.addEventListener(\"click\", addToWatched);\n    addToQueueButton.addEventListener(\"click\", addToQueued);\n}\n\nlocalStorageHandler();"],"names":["parcelRequire","document","querySelector","$2ea800676e6f7669$var$closeModal","$2ea800676e6f7669$var$modal","$2ea800676e6f7669$var$toggleModal","classList","toggle","addEventListener","e","key","add","event","filmId","async","response","fetch","$2ea800676e6f7669$var$findMovieApi_URL","$2ea800676e6f7669$var$API_key","json","$2ea800676e6f7669$var$getMovieById","then","movies","movieData","movie","title","vote_average","vote_count","popularity","originalTitle","original_title","overview","poster_path","console","log","modal","closeModal","posterEl","titleEl","voteRatingEl","getElementById","popularityEl","originalTitleEl","overviewEl","remove","src","innerHTML","$2ea800676e6f7669$var$getMovieData","target","dataset","id","addToWatchedButton","addToQueueButton","STORAGE_WATCHED","STORAGE_QUEUED","movieTitle","existingEntries","JSON","parse","localStorage","getItem","includes","push","setItem","stringify","$26f056e80eb8acc3$export$b0c42ac82fb8127"],"version":3,"file":"index.8b7001a3.js.map"}